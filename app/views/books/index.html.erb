<h1>図書館へようこそ</h1>

<p><%= link_to "図書の追加", new_book_path if current_admin %></p>
<p><%= link_to "新規図書購入申請", new_new_book_path %></p>
<p><%= link_to "新規図書購入申請一覧", new_books_path %></p>

<h2>図書一覧</h2>


<%= search_form_for @search do |f| %>
  <div class="field">
    <%= f.label :title_cont, "Title contains" %>
    <%= f.search_field :title_cont %>
  </div>
  <div class="actions"><%= f.submit "Search" %></div>
<% end %>

<table rules="all">
    <thead>
      <tr>
        <th>タイトル</th>
        <th>著者</th>
        <th>出版社</th>
        <th>編集 削除</th>
      </tr>
    </thead>

    <tbody>
      <% @books.each do |book| %>
      <tr>
        <td><%= link_to book.title, book_path(book.id) %> </td>
        <td><%= book.author.author_name %></td>
        <td><%= book.publisher.publisher_name %></td>
        <td>
          <%= link_to "編集", edit_book_path(book.id) %> 
          <%= link_to "削除", book_path(book.id), method: :delete, data: {confirm: "本当に削除しますか？"} %> 
        </td>
      </tr>
    </tbody>
  <% end %>
</table>


<h2>本の貸出し状態</h2>
<table rules="all">
    <thead>
      <tr>
        <th>図書番号</th>
        <th>タイトル</th>
        <th>著者</th>
        <th>状態</th>
      </tr>
    </thead>
    <tbody>
      <% @reservations.each do |reservation| %>
      <tr>
        <td><%= reservation.stock.id %></td>
        <td><%= reservation.stock.book.title %></td>
        <td><%= reservation.stock.book.author.author_name %></td>
        <td>
          <% case reservation.reservation_status_id %>
          <% when 1 %>
            <p>予約中</p>
          <% when 2 %>
            <p>貸出し中</p>
          <% when 3 %>
            <p>貸出し期限切れ</p>
          <% when 4 %>
            <p>返却済み</p>
          <% end %>
        </td>
      </tr>
    </tbody>
  <% end %>
</table>













<h2>ブックマークした本一覧</h2>
<table rules="all">
    <thead>
      <tr>
        <th>タイトル</th>
        <th>著者</th>
        <th>出版社</th>
      </tr>
    </thead>
    <tbody>
      <% @bookmarks.each do |bookmark| %>
      <tr>
        <td><%= bookmark.book.title %></td>
        <td><%= bookmark.book.author.author_name %></td>
        <td><%= bookmark.book.publisher.publisher_name %></td>
      </tr>
    </tbody>
  <% end %>
</table>

